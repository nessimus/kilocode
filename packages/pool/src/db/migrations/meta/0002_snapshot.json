{
	"id": "af2df043-35ca-4ace-b477-1b101533c4a6",
	"prevId": "6a47348b-f124-4f43-a7d0-990d79bc3286",
	"version": "7",
	"dialect": "postgresql",
	"tables": {
		"public.pool_digests": {
			"name": "pool_digests",
			"schema": "",
			"columns": {
				"account_id": {
					"name": "account_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"user_id": {
					"name": "user_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"digest": {
					"name": "digest",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"token_count": {
					"name": "token_count",
					"type": "integer",
					"primaryKey": false,
					"notNull": true,
					"default": 0
				},
				"updated_at": {
					"name": "updated_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"last_activity_at": {
					"name": "last_activity_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": false
				},
				"metadata": {
					"name": "metadata",
					"type": "jsonb",
					"primaryKey": false,
					"notNull": true,
					"default": "'{}'::jsonb"
				}
			},
			"indexes": {
				"pool_digests_updated_idx": {
					"name": "pool_digests_updated_idx",
					"columns": [
						{
							"expression": "updated_at",
							"isExpression": false,
							"asc": false,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {
				"pool_digests_account_id_user_id": {
					"name": "pool_digests_account_id_user_id",
					"columns": ["account_id", "user_id"]
				}
			},
			"uniqueConstraints": {},
			"policies": {},
			"checkConstraints": {},
			"isRLSEnabled": false
		},
		"public.pool_files": {
			"name": "pool_files",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "text",
					"primaryKey": true,
					"notNull": true
				},
				"account_id": {
					"name": "account_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"user_id": {
					"name": "user_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"filename": {
					"name": "filename",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"mime_type": {
					"name": "mime_type",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"size_bytes": {
					"name": "size_bytes",
					"type": "integer",
					"primaryKey": false,
					"notNull": true
				},
				"hash": {
					"name": "hash",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"source": {
					"name": "source",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"parsed_text": {
					"name": "parsed_text",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"embedding": {
					"name": "embedding",
					"type": "text",
					"primaryKey": false,
					"notNull": false,
					"default": null
				},
				"status": {
					"name": "status",
					"type": "pool_item_status",
					"typeSchema": "public",
					"primaryKey": false,
					"notNull": true,
					"default": "'captured'"
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"pool_files_account_created_idx": {
					"name": "pool_files_account_created_idx",
					"columns": [
						{
							"expression": "account_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						},
						{
							"expression": "created_at",
							"isExpression": false,
							"asc": false,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"pool_files_account_hash_unique": {
					"name": "pool_files_account_hash_unique",
					"columns": [
						{
							"expression": "account_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						},
						{
							"expression": "hash",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": true,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {},
			"checkConstraints": {},
			"isRLSEnabled": false
		},
		"public.pool_messages": {
			"name": "pool_messages",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "text",
					"primaryKey": true,
					"notNull": true
				},
				"account_id": {
					"name": "account_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"user_id": {
					"name": "user_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"session_id": {
					"name": "session_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"role": {
					"name": "role",
					"type": "pool_speaker",
					"typeSchema": "public",
					"primaryKey": false,
					"notNull": true
				},
				"content": {
					"name": "content",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"embedding": {
					"name": "embedding",
					"type": "text",
					"primaryKey": false,
					"notNull": false,
					"default": null
				},
				"status": {
					"name": "status",
					"type": "pool_item_status",
					"typeSchema": "public",
					"primaryKey": false,
					"notNull": true,
					"default": "'captured'"
				},
				"message_timestamp": {
					"name": "message_timestamp",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true
				},
				"tokens": {
					"name": "tokens",
					"type": "integer",
					"primaryKey": false,
					"notNull": false
				},
				"item_references": {
					"name": "item_references",
					"type": "jsonb",
					"primaryKey": false,
					"notNull": false,
					"default": "'null'::jsonb"
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"pool_messages_account_created_idx": {
					"name": "pool_messages_account_created_idx",
					"columns": [
						{
							"expression": "account_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						},
						{
							"expression": "created_at",
							"isExpression": false,
							"asc": false,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				},
				"pool_messages_account_session_idx": {
					"name": "pool_messages_account_session_idx",
					"columns": [
						{
							"expression": "account_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						},
						{
							"expression": "session_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {},
			"checkConstraints": {},
			"isRLSEnabled": false
		},
		"public.pool_sessions": {
			"name": "pool_sessions",
			"schema": "",
			"columns": {
				"id": {
					"name": "id",
					"type": "text",
					"primaryKey": true,
					"notNull": true
				},
				"account_id": {
					"name": "account_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"user_id": {
					"name": "user_id",
					"type": "text",
					"primaryKey": false,
					"notNull": true
				},
				"company_id": {
					"name": "company_id",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"company_name": {
					"name": "company_name",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"title": {
					"name": "title",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"preview": {
					"name": "preview",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"last_message_text": {
					"name": "last_message_text",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"first_user_message": {
					"name": "first_user_message",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"message_count": {
					"name": "message_count",
					"type": "integer",
					"primaryKey": false,
					"notNull": true,
					"default": 0
				},
				"last_message_id": {
					"name": "last_message_id",
					"type": "text",
					"primaryKey": false,
					"notNull": false
				},
				"last_message_role": {
					"name": "last_message_role",
					"type": "pool_speaker",
					"typeSchema": "public",
					"primaryKey": false,
					"notNull": false
				},
				"last_message_timestamp": {
					"name": "last_message_timestamp",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": false
				},
				"last_message_tokens": {
					"name": "last_message_tokens",
					"type": "integer",
					"primaryKey": false,
					"notNull": false
				},
				"last_message_references": {
					"name": "last_message_references",
					"type": "jsonb",
					"primaryKey": false,
					"notNull": false,
					"default": "'null'::jsonb"
				},
				"created_at": {
					"name": "created_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				},
				"updated_at": {
					"name": "updated_at",
					"type": "timestamp with time zone",
					"primaryKey": false,
					"notNull": true,
					"default": "now()"
				}
			},
			"indexes": {
				"pool_sessions_account_updated_idx": {
					"name": "pool_sessions_account_updated_idx",
					"columns": [
						{
							"expression": "account_id",
							"isExpression": false,
							"asc": true,
							"nulls": "last"
						},
						{
							"expression": "updated_at",
							"isExpression": false,
							"asc": false,
							"nulls": "last"
						},
						{
							"expression": "id",
							"isExpression": false,
							"asc": false,
							"nulls": "last"
						}
					],
					"isUnique": false,
					"concurrently": false,
					"method": "btree",
					"with": {}
				}
			},
			"foreignKeys": {},
			"compositePrimaryKeys": {},
			"uniqueConstraints": {},
			"policies": {},
			"checkConstraints": {},
			"isRLSEnabled": false
		}
	},
	"enums": {
		"public.pool_item_status": {
			"name": "pool_item_status",
			"schema": "public",
			"values": ["captured", "processing", "ready", "archived"]
		},
		"public.pool_speaker": {
			"name": "pool_speaker",
			"schema": "public",
			"values": ["user", "assistant"]
		}
	},
	"schemas": {},
	"sequences": {},
	"roles": {},
	"policies": {},
	"views": {},
	"_meta": {
		"columns": {},
		"schemas": {},
		"tables": {}
	}
}
